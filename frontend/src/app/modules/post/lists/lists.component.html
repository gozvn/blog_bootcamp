<app-header></app-header>
<div class="container">
    <!-- Breadcrumb -->
    <nav aria-label="breadcrumb" class="mb-4">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a routerLink="/">Home</a></li>
            <li class="breadcrumb-item active" aria-current="page">{{ pageTitle }}</li>
        </ol>
    </nav>

    <!-- Page Header -->
    <div class="row mb-2">
        <div class="col-12">
            <div class="d-flex align-items-center mb-4">
                <div class="category-icon me-3">
                    <i class="bi" [class.bi-star-fill]="isFeatured" [class.bi-journal-richtext]="!isFeatured"
                        style="font-size: 3rem; color: #0d6efd;"></i>
                </div>
                <div>
                    <h1 class="display-5 fw-bold mb-2">{{ pageTitle }}</h1>
                    <p class="lead text-muted mb-0">{{ pageDescription }}</p>
                </div>
            </div>

        </div>
    </div>

    <div class="row">
        <!-- Main Content -->
        <div class="col-lg-8">
            <!-- Posts List -->
            <div class="row g-4">
                @if (listPosts.length === 0) {
                <div class="col-12">
                    <p class="text-center text-muted">No posts available.</p>
                </div>
                } @else {
                @for (post of listPosts; track post.id) {
                <div class="col-md-6">
                    <div class="card border-0 shadow-sm h-100 post-card">
                        <a routerLink="/post/{{post.id}}/{{post.slug}}">
                            <img src="/assets/img/no_img.jpg" class="card-img-top" alt="{{post.title}}">
                        </a>
                        <div class="card-body d-flex flex-column">
                            <span class="badge bg-warning text-dark mb-2 align-self-start">{{ post.category?.name ||
                                'Blog' }}</span>
                            <h5 class="card-title fw-semibold">
                                <a routerLink="/post/{{post.id}}/{{post.slug}}"
                                    class="text-decoration-none text-dark">{{post.title}}</a>
                            </h5>
                            <p class="card-text text-muted flex-grow-1">
                                {{ post.content | truncate: 120 }}
                            </p>
                            <div class="d-flex justify-content-between align-items-center">
                                <small class="text-muted">{{ post.created_at | date:'MMM d, y â€¢ h:mm a' }}</small>
                                <a routerLink="/post/{{post.id}}/{{post.slug}}" class="btn btn-sm btn-primary">Read
                                    More</a>
                            </div>
                        </div>
                    </div>
                </div>
                }
                }
            </div>

            @if (listPosts.length !== 0 && totalPages > 1) {
            <!-- Pagination -->
            <nav aria-label="Page navigation" class="mt-5">
                <ul class="pagination justify-content-center">

                    <li class="page-item" [class.disabled]="currentPage <= 1">
                        <a class="page-link" [routerLink]="[getBaseUrl(), paginationService.previousPage(currentPage)]"
                            tabindex="-1">Previous</a>
                    </li>

                    @for (page of pages; track page) {
                    <li class="page-item" [class.active]="page === currentPage">
                        <a class="page-link" [routerLink]="[getBaseUrl(), page]">
                            {{ page }}
                        </a>
                    </li>
                    }

                    <li class="page-item" [class.disabled]="currentPage >= totalPages">
                        <a class="page-link"
                            [routerLink]="[getBaseUrl(), paginationService.nextPage(currentPage, totalPages)]">Next</a>
                    </li>
                </ul>
            </nav>
            }
        </div>

        <!-- Sidebar -->
        <div class="col-lg-4">
            <app-sidebar></app-sidebar>
        </div>
    </div>
</div>
<app-footer></app-footer>